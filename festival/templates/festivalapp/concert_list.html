{% extends 'base.html' %}

{% block content %}

<style>

    table {
        min-width: 800px;
        margin-left: auto;
        margin-right: auto;
        border-collapse: collapse;

    }

    tr {
        font-size: 17px;
        border-bottom: 1px solid black;

    }

    th {
    padding: 10px;
    width: 160px;




    }


</style>



    {% if emp.employee_status == 'sound_technician' or emp.employee_status == 'light_technician' %}
        <table>
            <tr style="font-size: 20px;">
                <th>Konsert dato:</th>
                <th>Konsert navn:</th>
                <th>Band navn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>

            {% for concert in concerts %}
            <tr>
                <th>{{ concert.date }}</th>
                <th>{{ concert.name }}</th>
                <th>{{ concert.band }}</th>
                <th>{{ concert.scene }}</th>
                <th><button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                    </button>


                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <p>{{ concert.name }}</p>
                            <p>{{ concert.band }}</p>
                            <p>{{ concert.date }}</p>
                            <p>{{ concert.scene }}</p>
                        </div>
                    </div></th>

            </tr>
            {% endfor %}
        </table>


            {% elif emp.employee_status == 'arranger' or emp.employee_status == 'manager' %}

            <table>
            <tr style="font-size: 20px;">
                <th>Konsert dato:</th>
                <th>Konsert navn:</th>
                <th>Band navn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>

            {% for concert in concerts %}
            <tr>
                <th>{{ concert.date }}</th>
                <th>{{ concert.name }}</th>
                <th>{{ concert.band }}</th>
                <th>{{ concert.scene }}</th>
                <th><button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                    </button>


                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>
                            <p>Konsertnavn: {{ concert.name }}</p>
                            <p>Band: {{ concert.band }}</p>
                            <p>Dato: {{ concert.date }}</p>
                            <p>Scene: {{ concert.scene }}</p>
                            <p>Festival: {{ concert.festival }}</p>
                            <p>Billettpris: {{ concert.price }}kr</p>
                            <p>Billettsalg:
                                {% if concert.ticket_sales > concert.scene.capacity %}
                                    {{ concert.scene.capacity }}
                                {% else %}
                                    {{ concert.ticket_sales }}
                                {% endif %}
                                av {{ concert.scene.capacity }}</p>
                            <h3>Spesifikke krav:</h3>
                            <p>{{ concert.band.specific_needs }}</p>
                            <h3>Lys({{ concert.lighting_work.count }} av {{ concert.band.light_needs }}):</h3>

                            <ul>
                                {% for lys in concert.lighting_work.all %}
                                    <li><p>{{ lys }}</p></li>
                                    {% empty %}
                                        <li>Ingen lysteknikere</li>
                                {% endfor %}
                            </ul>
                            <h3>Lyd({{ concert.sound_work.count }} av {{ concert.band.sound_needs }}):</h3>
                            <ul>
                                {% for lyd in concert.sound_work.all %}
                                    <li><p>{{ lyd }}</p></li>
                                    {% empty %}
                                        <li>Ingen lydteknikere</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>

                </th>

            </tr>
            {% endfor %}
            </table>


            {% elif emp.employee_status == 'booking_responsible' %}

        <table>
            <tr style="font-size: 20px;">
                <th>Konsert dato:</th>
                <th>Konsert navn:</th>
                <th>Band navn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>

            {% for concert in concerts %}
            <tr>
                <th>{{ concert.date }}</th>
                <th>{{ concert.name }}</th>
                <th>{{ concert.band }}</th>
                <th>{{ concert.scene }}</th>
                <th><button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                    </button>


                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

		                        	<p>Konsertnavn: {{ concert.name }}</p>
                                    <p>Band: {{ concert.band }}</p>
                                    <p>Dato: {{ concert.date }}</p>
                                    <p>Scene: {{ concert.scene }}</p>
                                    <p>Festival: {{ concert.festival }}</p>
                                    <p>Publikumstall: {{ concert.audience }}</p>

                                    <h3>LYS:</h3>

                                    <ul>
                                        {% for lys in concert.lighting_work.all %}
                                            <li><p>{{ lys }}</p></li>
                                        {% endfor %}
                                    </ul>
                                    <h3>LYD:</h3>
                                    <ul>
                                        {% for lyd in concert.sound_work.all %}
                                            <li><p>{{ lyd }}</p></li>
                                        {% endfor %}
                                    </ul>
                                    <form action="{% url 'festivalapp:set_audience' pk=concert.pk %}" method="POST">
                        {% csrf_token %}
                        Set Audience:
                        <input type="number" name="audience" id="audience">
                        <input type="submit" value="Set Audience">
                    </form>
                        </div>
                    </div></th>

            </tr>
            {% endfor %}
        </table>

            {% elif emp.employee_status == 'pr_manager' %}

            <table>
            <tr style="font-size: 20px;">
                <th>Konsert dato:</th>
                <th>Konsert navn:</th>
                <th>Band navn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>

            {% for concert in concerts %}
            <tr>
                <th>{{ concert.date }}</th>
                <th>{{ concert.name }}</th>
                <th>{{ concert.band }}</th>
                <th>{{ concert.scene }}</th>
                <th><button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Bandinfo
                    </button>


                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <h1>Bandinfo:<h1>
                            <p>Bandnavn: {{ concert.band.name }}</p>
                            <p>Solgte album: {{ concert.band.sold_albums }}</p>
                            <p>Presseomtaler: {{ concert.links }}</p>
                            <p>Kontaktinfo: {{ concert.band.contact_info }}</p>
                            <p>Omtale: {{ concert.band.review }}</p>
                        </div>
                    </div></th>

            </tr>
            {% endfor %}
        </table>



        </ul>

    {% endif %}

{% endblock %}
