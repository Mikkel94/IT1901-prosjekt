{% extends 'base.html' %}

{% block content %}


    {% if emp.employee_status == 'sound_technician' or emp.employee_status == 'light_technician' %}

        <ul id="list">
            <p>Dette er konsertene du skal jobbe med</p>
            {% for concert in concerts %}
                <li class="concert_element">
                    <p>{{ concert.name }}</p>
                    <p>{{ concert.band }}</p>
                    <p>{{ concert.date }}</p>
                    <p>{{ concert.scene }}</p>
                    <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                    </button>

                    <!-- The Modal -->
                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->

                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <p>{{ concert.name }}</p>
                            <p>{{ concert.band }}</p>
                            <p>{{ concert.date }}</p>
                            <p>{{ concert.scene }}</p>
                        </div>
                    </div>
                </li>

            {% endfor %}

            {% elif emp.employee_status == 'arranger' or emp.employee_status == 'manager' %}

            {% for concert in concerts %}
                <li class="concert_element">
                    <p>Konsertnavn: {{ concert.name }}</p>
                    <p>Band: {{ concert.band }}</p>
                    <p>Dato: {{ concert.date }}</p>
                    <p>Scene: {{ concert.scene }}</p>
                    <p>Festival: {{ concert.festival }}</p>
                    <p>Billettpris: {{ concert.price }}kr</p>
                    <p>Billettsalg:
                        {% if concert.ticket_sales > concert.scene.capacity %}
                            {{ concert.scene.capacity }}
                        {% else %}
                            {{ concert.ticket_sales }}
                        {% endif %}
                        av {{ concert.scene.capacity }}</p>

                    <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info</button>

                    <!-- The Modal -->
                    <div class="modal" id="modal_{{ forloop.counter }}">
                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <p>{{ concert.name }}</p>
                            <p>{{ concert.band }}</p>
                            <p>{{ concert.date }}</p>
                            <p>{{ concert.scene }}</p>
                            <h3>Spesifikke krav:</h3>
                            <p>{{ concert.band.specific_needs }}</p>
                            <h3>Lys({{ concert.lighting_work.count }} av {{ concert.band.light_needs }}):</h3>

                            <ul>
                                {% for lys in concert.lighting_work.all %}
                                    <li><p>{{ lys }}</p></li>
                                    {% empty %}
                                        <li>Ingen lysteknikere</li>
                                {% endfor %}
                            </ul>
                            <h3>Lyd({{ concert.sound_work.count }} av {{ concert.band.sound_needs }}):</h3>
                            <ul>
                                {% for lyd in concert.sound_work.all %}
                                    <li><p>{{ lyd }}</p></li>
                                    {% empty %}
                                        <li>Ingen lydteknikere</li>
                                {% endfor %}
                            </ul>

                        </div>
                    </div>
                </li>
            {% endfor %}
            {% elif emp.employee_status == 'booking_responsible' %}

            {% for concert in concerts %}
                <li class="concert_element">
                    <p>{{ concert.name }}</p>
                    <p>{{ concert.band }}</p>
                    <p>{{ concert.date }}</p>
                    <p>{{ concert.scene }}</p>
                    <p>{{ concert.audience }}</p>
                    <form action="{% url 'festivalapp:set_audience' pk=concert.pk %}" method="POST">
                        {% csrf_token %}
                        Set Audience:
                        <input type="number" name="audience" id="audience">
                        <input type="submit" value="Set Audience">
                    </form>

                    <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                    </button>

                    <!-- The Modal -->
                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <p>{{ concert.name }}</p>
                            <p>{{ concert.band }}</p>
                            <p>{{ concert.date }}</p>
                            <p>{{ concert.scene }}</p>
                            <h3>LYS:</h3>

                            <ul>
                                {% for lys in concert.lightingWork.all %}
                                    <li><p>{{ lys }}</p></li>
                                {% endfor %}
                            </ul>
                            <h3>LYD:</h3>
                            <ul>
                                {% for lyd in concert.soundWork.all %}
                                    <li><p>{{ lyd }}</p></li>
                                {% endfor %}
                            </ul>

	                        <div class="modal-content" >
	                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

		                        	<p>Konsertnavn: {{ concert.name }}</p>
                                    <p>Band: {{ concert.band }}</p>
                                    <p>Dato: {{ concert.date }}</p>
                                    <p>Scene: {{ concert.scene }}</p>
                                    <p>Festival: {{ concert.festival }}</p>

                                    <h3>LYS:</h3>

                                    <ul>
                                        {% for lys in concert.lighting_work.all %}
                                            <li><p>{{ lys }}</p></li>
                                        {% endfor %}
                                    </ul>
                                    <h3>LYD:</h3>
                                    <ul>
                                        {% for lyd in concert.sound_work.all %}
                                            <li><p>{{ lyd }}</p></li>
                                        {% endfor %}
                                    </ul>
	                        </div>
                        </div>
                    </div>
                </li>
            {% endfor %}

            {% elif emp.employee_status == 'pr_manager' %}

            {% for concert in concerts %}
                <li class="concert_element">
                    <p>Konsertnavn: {{ concert.name }}</p>
                    <p>Band: {{ concert.band }}</p>
                    <p>Dato: {{ concert.date }}</p>
                    <p>Scene: {{ concert.scene }}</p>
                    <p>Festival: {{ concert.festival }}</p>

                    <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Bandinfo</button>

                    <!-- The Modal -->
                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>
                            <h1>Bandinfo:<h1>
                            <p>Bandnavn: {{ concert.band.name }}</p>
                            <p>Solgte album: {{ concert.band.sold_albums }}</p>
                            <p>Presseomtaler: {{ concert.links }}</p>
                            <p>Kontaktinfo: {{ concert.band.contact_info }}</p>
                            <p>Omtale: {{ concert.band.review }}</p>
                        </div>
                    </div>
                </li>
            {% endfor %}

        </ul>

    {% endif %}

{% endblock %}
