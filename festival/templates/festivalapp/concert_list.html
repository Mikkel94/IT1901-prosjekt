{% extends 'base.html' %}

{% block content %}

    {% if emp.employee_status == 'LYDTEKNIKER' or emp.employee_status == 'LYSTEKNIKER' %}
        <table>
            <thead>
            <tr>
                <th>Dato:</th>
                <th>Konsert:</th>
                <th>Bandnavn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>
            </thead>

            <tbody>
            {% for concert in concerts %}
                <tr>
                    <td>{{ concert.date }}</td>
                    <td>{{ concert.name }}</td>
                    <td>{{ concert.band }}</td>
                    <td>{{ concert.scene }}</td>
                    <td>
                        <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info</button>
                    </td>
                </tr>

                <div class="modal" id="modal_{{ forloop.counter }}">

                    <!-- Modal content -->
                    <div class="modal-content">
                        <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                        <p>{{ concert.name }}</p>
                        <p>{{ concert.band }}</p>
                        <p>{{ concert.date }}</p>
                        <p>{{ concert.scene }}</p>
                    </div>
                </div>

            {% endfor %}
            </tbody>
        </table>

    {% elif emp.employee_status == 'ARRANGER' or emp.employee_status == 'MANAGER' %}
        <table>
            <thead>
            <tr>
                <th>Dato:</th>
                <th>Konsert:</th>
                <th>Bandnavn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>
            </thead>

            <tbody>

            {% for concert in concerts %}
                <tr>
                    <td>{{ concert.date }}</td>
                    <td>{{ concert.name }}</td>
                    <td>{{ concert.band }}</td>
                    <td>{{ concert.scene }}</td>
                    <td>
                        <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                        </button>


                        <div class="modal" id="modal_{{ forloop.counter }}">

                            <!-- Modal content -->
                            <div class="modal-content">
                                <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>
                                <p>Konsertnavn: {{ concert.name }}</p>
                                <p>Band: {{ concert.band }}</p>
                                <p>Dato: {{ concert.date }}</p>
                                <p>Scene: {{ concert.scene }}</p>
                                <p>Festival: {{ concert.festival }}</p>
                                <p>Billettpris: {{ concert.price }}kr</p>
                                <p>Billettsalg:
                                    {% if concert.ticket_sales > concert.scene.capacity %}
                                        {{ concert.scene.capacity }}
                                    {% else %}
                                        {{ concert.ticket_sales }}
                                    {% endif %}
                                    av {{ concert.scene.capacity }}</p>
                                <h3>Spesifikke krav:</h3>
                                <p>{{ concert.band.specific_needs }}</p>
                                <h3>Lys({{ concert.lighting_work.count }} av {{ concert.band.light_needs }}):</h3>

                                <ul>
                                    {% for lys in concert.lighting_work.all %}
                                        <li><p>{{ lys }}</p></li>
                                        {% empty %}
                                        <li>Ingen lysteknikere</li>
                                    {% endfor %}
                                </ul>
                                <h3>Lyd({{ concert.sound_work.count }} av {{ concert.band.sound_needs }}):</h3>
                                <ul>
                                    {% for lyd in concert.sound_work.all %}
                                        <li><p>{{ lyd }}</p></li>
                                        {% empty %}
                                        <li>Ingen lydteknikere</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>

                    </td>

                </tr>
            {% endfor %}
            </tbody>
        </table>

    {% elif emp.employee_status == 'BOOKINGANSVARLIG' %}

        <table>
            <thead>

            <tr>
                <th>Dato:</th>
                <th>Konsert:</th>
                <th>Bandnavn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>
            </thead>

            <tbody>

            {% for concert in concerts %}
                <tr>
                    <td>{{ concert.date }}</td>
                    <td>{{ concert.name }}</td>
                    <td>{{ concert.band }}</td>
                    <td>{{ concert.scene }}</td>
                    <td>
                        <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Mer info
                        </button>


                        <div class="modal" id="modal_{{ forloop.counter }}">

                            <!-- Modal content -->
                            <div class="modal-content">
                                <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                                <p>Konsertnavn: {{ concert.name }}</p>
                                <p>Band: {{ concert.band }}</p>
                                <p>Dato: {{ concert.date }}</p>
                                <p>Scene: {{ concert.scene }}</p>
                                <p>Festival: {{ concert.festival }}</p>
                                <p>Publikumstall: {{ concert.audience }}</p>

                                <h3>LYS:</h3>

                                <ul>
                                    {% for lys in concert.lighting_work.all %}
                                        <li><p>{{ lys }}</p></li>
                                    {% endfor %}
                                </ul>
                                <h3>LYD:</h3>
                                <ul>
                                    {% for lyd in concert.sound_work.all %}
                                        <li><p>{{ lyd }}</p></li>
                                    {% endfor %}
                                </ul>
                                <form action="{% url 'festivalapp:set_audience' pk=concert.pk %}" metdod="POST">
                                    {% csrf_token %}
                                    Set Audience:
                                    <input type="number" name="audience" id="audience">
                                    <input type="submit" value="Set Audience">
                                </form>
                            </div>
                        </div>
                    </th>

                </tr>
            {% endfor %}
            </tbody>
        </table>

    {% elif emp.employee_status == 'PR-MANAGER' %}

        <table>
            <thead>
            <tr>
                <th>Dato:</th>
                <th>Konsert:</th>
                <th>Bandnavn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>
            </thead>

            <tbody>
            {% for concert in concerts %}
                <tr>
                    <td>{{ concert.date }}</td>
                    <td>{{ concert.name }}</td>
                    <td>{{ concert.band }}</td>
                    <td>{{ concert.scene }}</td>
                    <td>
                        <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Bandinfo
                        </button>
                        <div class="modal" id="modal_{{ forloop.counter }}">

                            <!-- Modal content -->
                            <div class="modal-content">
                                <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>
                                <h1>Bandinfo:</h1>
                                <p>Bandnavn: {{ concert.band.name }}</p>
                                <p>Solgte album: {{ concert.band.sold_albums }}</p>
                                <p>Presseomtaler: {{ concert.links }}</p>
                                <p>Kontaktinfo: {{ concert.band.contact_info }}</p>
                                <p>Omtale: {{ concert.band.review }}</p>
                            </div>
                        </div>
                    </td>

                </tr>
            {% endfor %}
            </tbody>
        </table>


    {% elif emp.employee_status == 'SERVICE MANAGER' %}

        <table>
            <thead>
            <tr>
                <th>Konsert dato:</th>
                <th>Konsert navn:</th>
                <th>Band navn:</th>
                <th>Scene:</th>
                <th>Se mer:</th>
            </tr>
            </thead>

            <tbody>


            {% for concert in concerts %}

                <tr>
                    <td>{{ concert.date }}</td>
                    <td>{{ concert.name }}</td>
                    <td>{{ concert.band }}</td>
                    <td>{{ concert.scene }}</td>
                    <td>
                        <button type="button" class="button" onclick='concert_button({{ forloop.counter }})'>Bandinfo
                        </button>
                    </td>

                    <div class="modal" id="modal_{{ forloop.counter }}">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span onclick="myFunction({{ forloop.counter }})" class="close">&times;</span>

                            <h1>Info:</h1>

                            <p>Starttid: {{ concert.start_time }}</p>
                            <p>Sluttid: {{ concert.end_time }}</p>
                            <p>Forventet publikumstall: {{ concert.expected_audience }}</p>
                            <p>Sjanger: {{ concert.genre }}</p>
                            <p>Band: {{ concert.band }}</p>
                            <p>Estimert innkjøp for bar til {{ concert.scene }}
                                : {{ concert.scene.calc_beverage_prices }} kr</p>
                            <p>Scene: {{ concert.scene }}</p>

                        </div>
                    </div>

                </tr>
            {% endfor %}
            </tbody>
        </table>

    {% endif %}

{% endblock %}
